# HTTP аутентификация
*****
## Цель
Спроектировать и разработать систему авторизации пользователей на протоколе HTTP
## Текст задания
Минимальные тербования
* Функциоанльность входа/выхода
* Хранение паролей в хешированном виде

Дополнительные возможности
* Форма регистрации
* Смена пароля
* Восстановление пароля
* Ограничение по времени сессии
* Ограничение срока действия пароля
* Валидация пароля
* Хранение хеша пароля с солью
* Возможность использования одновременного использования одним пользователем нескольких клиентов

## Ход работы
* Пользовательский интерфейс и сценарии работы

![Рис. 1 - Интерфейс](https://github.com/4260snow/lab1_reg_auth/blob/main/ui.drawio.png)

1) Пользователь попадает на index.php, если нет настроенных сookie, то переадресация на форму регистрации (signup.php). Затем пользователь вводит логин и пароль. Переадресация на auth.php, в случае корректного ввода настройка cookie и переадресация на главную страницу (index.php). Если ввод некоректен, то возврат на форму регистрации (signup.php) c сообщением об ошибке.
2) Пользователь зашёл на форму авторизации (login.php), ввёл логин и пароль. Проверка данных (auth.php). Если данные корректны, то переадресация на страницу с приветствем (index.php). Иначе возвратн на форму входа (login.php) с сообщением об ошбке
3) На странице основной странице (index.php) есть 2 кнопки. Если пользователь нажмёт logout, то произойдёт переадресация на страницу входа (login.php) и удаление cookies. Или, если нажмёт на change password:
    * переадресация на форкму ввода паролей (change_passwd.php): старый и новый.
    * Если старый пароль введён верно, а новый корректен, то запись нового пароля в бд и переадресация на index.php. Иначе переадресация на форму изменения пароля (change_passwd.php) и сообщение об ошибке.


## Описание clien-server
* Регистрация
![Рис. 2 - client-server](https://github.com/4260snow/lab1_reg_auth/blob/main/std_reg.png)

## Структура базы данных (json)

| Название         | Описание                                   |
|------------------|--------------------------------------------|
| LOGIN            | Логин пользователя                         |
| PASSWORD         | Хеш пароля с солью (LOGIN в качестве соли) |
| PASSWORD_EXP_DATE| Дата истечения пароля                      |

## Алгоритмы

 * Регистрирация (reg.php)
 
    ![](https://github.com/4260snow/lab1_reg_auth/blob/main/reg_bd.drawio.png)
  
 * Вход в аккаунт (login.php)
  
    ![](https://github.com/4260snow/lab1_reg_auth/blob/main/login_bd.drawio.png)
  
 * Выход из аккаунта (exit.php)
  
    ![](https://github.com/4260snow/lab1_reg_auth/blob/main/logout_bd.drawio.png)
  
 * Смена пароля, если он забыт (forgot_password.php)
  
    ![](https://github.com/4260snow/lab1_reg_auth/blob/main/forgot_pwd_bd.drawio.png)
  
 * Новый пароль (изменение старого пароля) (change_password.php)
 
 ![](https://github.com/4260snow/lab1_reg_auth/blob/main/cng_pwd_bd.drawio.png)

### Вывод
Спроектирована и разработана система авторизации пользователей на протоколе HTTP
