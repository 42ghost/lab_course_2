# Лабораторная работа 5. Разработка сервисов
*****
## Цель работы
Разработать и реализовать алгоритм внешней сортировки. Данные хранятся на сервере в массиве, сервер предоставляет доступ к отдельным элементам. Клиент поочерёдно запрашивая отдельные ячейки сортирует массив.

## Ход работы
### Пользовательский интерфейс
Telegram bot
![Рис. 1 - Интерфейс](https://github.com/4260snow/lab5_sort/blob/main/images/ui.png)

### Сценарии работы
* При выполнении команды /start бот предлагает выполнить команду /help
* При выполнении команды /help выводится список возможных команд и краткое описание
* /new_array генерирует массив из 10 элементов и выводит его
* Когда пользователь вводит /my_array бот проверяет наличие массива, если его нет, то генерирует его. Затем отправляет массив пользователю
* Команда /swap принимает 2 аргумента, если пользователь ввёл иное количество, то бот отвечает: "Неверное количсество аргументов". Если введены не целые числа или индексы за пределами массива, то отвечает сообщением: "Некорректные аргументы". Иначе меняет местами элементы с написанными индексами
* /merge_sort - Если пользователь передаёт черезе пробел целые числа вместе с этой командой, то программа возвращает ему отсортированный массив, который он передал. Если команда без агрументов, то бот отсортирует массив, который был сгенерирован ранее

## Стурктура хранеиня массивов пользователей
Для этого используется dict(), ключами в котором являются telegram id пользователей

## Алгоритм сортировки
Сортировка слиянием

## Значимые фрагменты кода

* Перестановка элментов по индексам

```python
@dp.message_handler(commands=['swap'])
async def start_command(msg: types.Message):
    if arrays.get(msg.from_user.id, False):
        tmp = msg.get_args().split()
        if len(tmp) == 2:
            try:
                arrays[msg.from_user.id][int(tmp[0])], arrays[msg.from_user.id][int(tmp[1])] =\
                    arrays[msg.from_user.id][int(tmp[1])], arrays[msg.from_user.id][int(tmp[0])]
                await msg.answer(str(arrays[msg.from_user.id]))
            except:
                await msg.answer("Некорректные аргументы")
        else:
            await msg.answer("Неверное количсество аргументов")
    else:
        await msg.answer(str(gen(msg.from_user.id)))
```
